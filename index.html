<style>
    /* Neuer Style für den KI-Marker */
    .ai-verified {
        color: var(--yellow) !important;
        text-shadow: 0 0 20px rgba(255, 204, 0, 0.6);
    }
    .ai-badge {
        font-size: 1.2rem;
        vertical-align: middle;
        margin-left: 10px;
        display: none; /* Standardmäßig aus */
    }
    .ai-verified .ai-badge { display: inline-block; }
    
    /* Sanfter Fade für den Songnamen */
    #song-display {
        transition: opacity 20s linear;
        height: 2rem;
        font-weight: bold;
    }
</style>

<h1 id="dance-name">BEREIT <span id="ai-badge" class="ai-badge">✨</span></h1>

<script>
    // In der Update-Funktion:
    function updateDisplay(dance, fromAI = false) {
        const nameEl = document.getElementById('dance-name');
        const badge = document.getElementById('ai-badge');
        
        nameEl.innerText = dance;
        
        if (fromAI) {
            nameEl.classList.add('ai-verified');
            badge.style.display = "inline-block";
        } else {
            nameEl.classList.remove('ai-verified');
            badge.style.display = "none";
        }

        // Schrittfolgen-Logik
        const isWalzer = dance.toLowerCase().includes("walzer");
        const showSteps = document.getElementById('show-steps').checked;
        document.getElementById('walzer-svg').style.display = (isWalzer && showSteps) ? "block" : "none";
        
        if (isWalzer && showSteps) startWaltzAnim(); else stopWaltzAnim();
    }

    // Die handleShortcut Funktion bekommt den linearen Fade:
    function handleShortcut(song) {
        aiOverride = true;
        const disp = document.getElementById('song-display');
        disp.innerText = "UHR: " + song;
        disp.style.opacity = "1";
        disp.style.transition = "none"; // Reset für Sofort-Anzeige
        
        askAI(song);

        setTimeout(() => {
            disp.style.transition = "opacity 20s linear";
            disp.style.opacity = "0";
            // Nach 20s wieder die lokale Analyse erlauben
            setTimeout(() => { aiOverride = false; }, 20000);
        }, 1000);
    }
</script>
